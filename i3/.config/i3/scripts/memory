#!/usr/bin/env bash
# Memory usage - uses MemAvailable for accurate calculation

awk '
/^MemTotal:/ { total=$2 }
/^MemAvailable:/ { avail=$2 }
END {
    used = total - avail
    pct = used / total * 100

    # full text
    printf "%.f%%\n", pct
    # short text
    printf "%.f%%\n", pct

    # color
    if (pct > 90) {
        print "#FF0000"
    } else if (pct > 80) {
        print "#FFAE00"
    } else if (pct > 70) {
        print "#FFF600"
    }
}
' /proc/meminfo
